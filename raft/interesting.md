# 代码中一些有趣巧妙的设计
## Storage 接口中的 Entrys 预留第一个位置

Entrys 数组的第一个位置预留给快照的最后一个 Entry.  

这样做有两个好处:  
- 第一方便进行有无快照的判断,只要判断第一个Entry的索引值和任期值是否为 0 就可以  
- 第二在完成一次快照后的第一次请求需要对快照进行一致性检查,也可以很容易的从 entrys 的第一个位置中取出快照中最后一个 entry 的信息.